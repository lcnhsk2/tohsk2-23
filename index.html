<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HSK Level 2 â€¢ Ujian Doraemon (Username & Timer)</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
        }
        body {
            font-family: 'Segoe UI', 'Comic Sans MS', 'Chalkboard', sans-serif;
            background: linear-gradient(145deg, #6ec8f0 0%, #3b9bd6 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            margin: 0;
            position: relative;
            overflow-x: hidden;
        }
        .doraemon-bg {
            position: fixed;
            bottom: -20px;
            right: -20px;
            width: 280px;
            opacity: 0.15;
            z-index: 0;
            pointer-events: none;
        }
        .kantong-ajaib {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 80px;
            opacity: 0.4;
            z-index: 0;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-radius: 50px 50px 30px 30px;
            box-shadow: 0 20px 40px rgba(0, 50, 80, 0.5), 0 0 0 4px #f5e56b, 0 0 0 8px #e03a3a;
            padding: 30px 25px;
            position: relative;
            z-index: 10;
            border: 3px solid white;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            background: #fef9d7;
            padding: 15px 25px;
            border-radius: 60px 60px 30px 30px;
            border: 3px solid #e03a3a;
            box-shadow: inset 0 -3px 0 #b33f3f;
        }
        .header h1 {
            font-size: 1.8rem;
            color: #2a6f9c;
            text-shadow: 2px 2px 0 #f5e56b;
            letter-spacing: 2px;
        }
        .doraemon-icon {
            width: 70px;
            height: 70px;
            background: #1e90ff;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 5px 0 #0b4d7a;
            position: relative;
        }
        .doraemon-icon::before {
            content: "ğŸ±";
            font-size: 45px;
            position: absolute;
            top: 5px;
            left: 8px;
        }
        .timer-panel {
            display: flex;
            justify-content: space-between;
            background: #2f5f8a;
            padding: 12px 25px;
            border-radius: 40px;
            color: white;
            font-weight: bold;
            border: 3px solid #f5e56b;
            margin-bottom: 20px;
            font-size: 1.3rem;
            text-shadow: 2px 2px 0 #1d3e5e;
        }
        .timer-item {
            background: #0e3d5e;
            padding: 5px 20px;
            border-radius: 40px;
            box-shadow: inset 0 -3px 0 #0a2a3a;
        }
        .question-box {
            background: #fffbf0;
            border-radius: 40px;
            padding: 30px;
            border: 4px solid #f5e56b;
            box-shadow: 0 8px 0 #d4a017, inset 0 2px 10px #ffeeaa;
            margin-bottom: 30px;
        }
        .question-text {
            font-size: 1.4rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #1e3b5c;
            font-weight: 600;
            background: #e6f3ff;
            padding: 15px 20px;
            border-radius: 30px;
            border: 2px dashed #3b9bd6;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .option-item {
            background: white;
            border-radius: 50px;
            padding: 12px 20px;
            border: 3px solid #3b9bd6;
            cursor: pointer;
            transition: 0.2s;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .option-item:hover {
            background: #c2e4ff;
            border-color: #e03a3a;
            transform: scale(1.01);
        }
        .option-item input[type="radio"] {
            appearance: none;
            width: 24px;
            height: 24px;
            border: 3px solid #1e90ff;
            border-radius: 50%;
            outline: none;
            transition: 0.1s;
            cursor: pointer;
            background: white;
        }
        .option-item input[type="radio"]:checked {
            background: #e03a3a;
            border-color: #e03a3a;
            box-shadow: 0 0 0 3px #f5e56b;
        }
        .option-item label {
            flex: 1;
            cursor: pointer;
            color: #1d3e5e;
        }
        .btn-submit {
            background: #f5a623;
            border: none;
            font-size: 2rem;
            font-weight: bold;
            padding: 20px 30px;
            border-radius: 60px;
            color: white;
            text-shadow: 2px 2px 0 #b35f00;
            border-bottom: 8px solid #b35f00;
            cursor: pointer;
            width: 100%;
            transition: 0.07s;
            margin-top: 15px;
            font-family: inherit;
        }
        .btn-submit:active {
            border-bottom-width: 2px;
            transform: translateY(6px);
        }
        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .modal-start {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 80, 130, 0.95);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }
        .modal-card {
            background: #fef9d7;
            max-width: 500px;
            width: 90%;
            padding: 40px;
            border-radius: 80px 80px 40px 40px;
            border: 8px solid #f5e56b;
            text-align: center;
            box-shadow: 0 20px 0 #b35f00;
        }
        .modal-card h2 {
            font-size: 3rem;
            color: #e03a3a;
            margin-bottom: 10px;
        }
        .modal-card p {
            font-size: 1.5rem;
            margin: 20px 0;
            color: #1e3b5c;
        }
        .modal-card input {
            width: 80%;
            padding: 15px;
            border-radius: 50px;
            border: 3px solid #1e90ff;
            font-size: 1.5rem;
            text-align: center;
            margin: 20px 0;
            outline: none;
            background: white;
        }
        .btn-start {
            background: #1e90ff;
            border: none;
            font-size: 2.5rem;
            padding: 15px 40px;
            border-radius: 50px;
            color: white;
            border-bottom: 8px solid #0b4d7a;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
        }
        .btn-start:active {
            border-bottom-width: 2px;
            transform: translateY(6px);
        }
        .laporan {
            background: #e6f7ff;
            border-radius: 40px;
            padding: 25px;
            border: 4px solid #f5e56b;
            text-align: center;
        }
        .laporan h2 {
            font-size: 2.5rem;
            color: #e03a3a;
        }
        .laporan .skor {
            font-size: 3rem;
            background: #fff;
            display: inline-block;
            padding: 10px 40px;
            border-radius: 60px;
            margin: 20px;
            border: 5px solid #1e90ff;
        }
        .detail {
            display: flex;
            justify-content: space-around;
            font-size: 1.5rem;
            margin: 30px 0;
        }
        .btn-ulang {
            background: #f5a623;
            border: none;
            font-size: 2rem;
            padding: 15px 30px;
            border-radius: 50px;
            color: white;
            border-bottom: 6px solid #b35f00;
            cursor: pointer;
        }
        .footer {
            margin-top: 25px;
            text-align: center;
            color: #fff;
            text-shadow: 2px 2px 0 #1e3b5c;
        }
        .username-display {
            font-size: 1.5rem;
            background: #ffefc0;
            padding: 10px;
            border-radius: 40px;
            margin-bottom: 10px;
            border: 2px solid #f5a623;
        }
    </style>
</head>
<body>
    <div class="kantong-ajaib">ğŸ””ğŸ±</div>
    <div class="doraemon-bg">ğŸ±ğŸ””ğŸ±ğŸ””ğŸ±</div>

    <div class="container" id="mainContainer"></div>

    <script>
        (function() {
            document.addEventListener('contextmenu', e => e.preventDefault());
            document.addEventListener('copy', e => e.preventDefault());
            document.addEventListener('cut', e => e.preventDefault());
            document.addEventListener('paste', e => e.preventDefault());

            // Data soal (35 soal)
            const questions = [
                { no: 21, type: 'mc3', part: 'listening', question: 'ä½ è¦å»ä¸­å›½ï¼Ÿå“ªå¤©çš„é£æœºï¼Ÿç”·ï¼šå°±æ˜¯ä»Šå¤©ä¸­åˆã€‚é—®ï¼šç”·çš„ä»€ä¹ˆæ—¶å€™å»ä¸­å›½ï¼Ÿ', options: ['A ä»Šå¤©ä¸­åˆ', 'B æ˜å¤©ä¸­åˆ', 'C åå¤©ä¸­åˆ'], answer: 'A' },
                { no: 22, type: 'mc3', part: 'listening', question: 'ç”·ï¼šå†æœ‰ååˆ†é’Ÿèˆ¹å°±è¦å¼€äº†ï¼Œä½ æœ‹å‹æ€ä¹ˆè¿˜æ²¡åˆ°ï¼Ÿå¥³ï¼šæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæˆ‘ç»™ä»–æ‰“ä¸ªç”µè¯é—®é—®ã€‚é—®ï¼šå¥³çš„è¦ç»™è°æ‰“ç”µè¯ï¼Ÿ', options: ['A ä¸ˆå¤«', 'B åŒ»ç”Ÿ', 'C æœ‹å‹'], answer: 'C' },
                { no: 23, type: 'mc3', part: 'listening', question: 'å¥³ï¼šä½ å–œæ¬¢å–å’–å•¡å—ï¼Ÿç”·ï¼šä¸å¤ªå–œæ¬¢ï¼Œæˆ‘çˆ±å–èŒ¶ã€‚é—®ï¼šç”·çš„çˆ±å–ä»€ä¹ˆï¼Ÿ', options: ['A èŒ¶', 'B ç‰›å¥¶', 'C å’–å•¡'], answer: 'A' },
                { no: 24, type: 'mc3', part: 'listening', question: 'ç”·ï¼šç™½è€å¸ˆï¼Œæ‚¨æ¥è¿™ä¸ªå­¦æ ¡å¤šå°‘å¹´äº†ï¼Ÿå¥³ï¼šæˆ‘äºŒåå››å²å°±æ¥è¿™ä¸ªå­¦æ ¡äº†ï¼Œåˆ°ç°åœ¨æœ‰ä¸‰åå¤šå¹´äº†ã€‚é—®ï¼šå¥³çš„åœ¨å“ªå„¿å·¥ä½œï¼Ÿ', options: ['A åŒ»é™¢', 'B å­¦æ ¡', 'C å•†åº—'], answer: 'B' },
                { no: 25, type: 'mc3', part: 'listening', question: 'å¥³ï¼šä½ æ‰¾åˆ°ä½ çš„æ‰‹è¡¨äº†ï¼Ÿç”·ï¼šæ²¡æœ‰ï¼Œè¿™æ˜¯æˆ‘æ˜¨å¤©æ–°ä¹°çš„ã€‚é—®ï¼šé‚£å—å„¿æ–°è¡¨æ˜¯ä»€ä¹ˆæ—¶å€™ä¹°çš„ï¼Ÿ', options: ['A æ˜¨å¤©', 'B ä¸Šä¸ªæœˆ', 'C å»å¹´'], answer: 'A' },
                { no: 26, type: 'mc3', part: 'listening', question: 'ç”·ï¼šæ˜¯çœŸçš„å—ï¼Ÿé‚£å¤ªæœ‰æ„æ€äº†ã€‚å¥³ï¼šæ˜¯çœŸçš„ï¼Œæˆ‘ä¹Ÿè§‰å¾—å¾ˆå¥½ç¬‘ã€‚é—®ï¼šä»–ä»¬è§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ', options: ['A å¾ˆå¥½åƒ', 'B å¾ˆå¥½ç¬‘', 'C å¾ˆå¥½å¬'], answer: 'B' },
                { no: 27, type: 'mc3', part: 'listening', question: 'å¥³ï¼šä½ æ€ä¹ˆå›æ¥äº†ï¼Ÿæ²¡å»è¸¢è¶³çƒï¼Ÿç”·ï¼šå¤©æ°”å¤ªçƒ­äº†ï¼Œæ‰€ä»¥å¤§å®¶éƒ½å›å»äº†ã€‚é—®ï¼šç”·çš„ä¸ºä»€ä¹ˆå›æ¥äº†ï¼Ÿ', options: ['A ç´¯äº†', 'B å¤©é˜´äº†', 'C å¤©æ°”å¤ªçƒ­'], answer: 'C' },
                { no: 28, type: 'mc3', part: 'listening', question: 'ç”·ï¼šä½ åˆ°å“ªå„¿äº†ï¼Ÿå¥³ï¼šæˆ‘åœ¨å‡ºç§Ÿè½¦ä¸Šï¼Œäº”åˆ†é’Ÿåå°±åˆ°ã€‚é—®ï¼šå¥³çš„ç°åœ¨åœ¨å“ªå„¿ï¼Ÿ', options: ['A æˆ¿é—´é‡Œ', 'B é£æœºä¸Š', 'C å‡ºç§Ÿè½¦ä¸Š'], answer: 'C' },
                { no: 29, type: 'mc3', part: 'listening', question: 'å¥³ï¼šçˆ¸çˆ¸ï¼Œè¿™ä¸ªè‡ªè¡Œè½¦æ€ä¹ˆæ ·ï¼Ÿç”·ï¼šå¾ˆæ¼‚äº®ï¼Œä½ å–œæ¬¢å—ï¼Ÿé—®ï¼šä»–ä»¬åœ¨çœ‹ä»€ä¹ˆï¼Ÿ', options: ['A æ¤…å­', 'B æ¡Œå­', 'C è‡ªè¡Œè½¦'], answer: 'C' },
                { no: 30, type: 'mc3', part: 'listening', question: 'ç”·ï¼šåƒè¯äº†å—ï¼Ÿå¥³ï¼šè¿˜æ²¡å‘¢ï¼Œåƒå®Œé¥­ä¸€ä¸ªå°æ—¶ååƒã€‚é—®ï¼šç”·çš„è®©å¥³çš„åƒä»€ä¹ˆï¼Ÿ', options: ['A è¯', 'B ç¾Šè‚‰', 'C ç±³é¥­'], answer: 'A' },
                { no: 31, type: 'mc3', part: 'listening', question: 'ç”·ï¼šå¤©æ™´äº†ï¼Œæˆ‘ä»¬å‡ºå»èµ°èµ°å§ã€‚å¥³ï¼šæˆ‘æƒ³åœ¨å®¶çœ‹ç”µè§†ã€‚ç”·ï¼šå›æ¥å†çœ‹ï¼Ÿå¥³ï¼šå¥½å§ï¼Œé‚£ä½ ç­‰æˆ‘ä¸€ä¸‹ï¼Œæˆ‘å»ç©¿ä»¶è¡£æœã€‚é—®ï¼šå¤–é¢å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ', options: ['A ä¸‹é›¨äº†', 'B ä¸‹é›ªäº†', 'C å¤©æ™´äº†'], answer: 'C' },
                { no: 32, type: 'mc3', part: 'listening', question: 'å¥³ï¼šæˆ‘ä»¬è¦äº†å‡ ä¸ªèœäº†ï¼Ÿç”·ï¼šæˆ‘çœ‹çœ‹ï¼Œç°åœ¨æ˜¯ä¸ƒä¸ªã€‚å¥³ï¼šå¥½ï¼Œå†è¦ä¸€ä¸ªé±¼å°±å¯ä»¥äº†ï¼Œå°±è¿™äº›ï¼Œè°¢è°¢ã€‚ç”·ï¼šä¸å®¢æ°”ã€‚é—®ï¼šä»–ä»¬æœ€å¯èƒ½åœ¨å“ªå„¿ï¼Ÿ', options: ['A æ°´æœåº—', 'B é¥­åº—é‡Œ', 'C å¦¹å¦¹å®¶'], answer: 'B' },
                { no: 33, type: 'mc3', part: 'listening', question: 'ç”·ï¼šä½ çœ‹é‚£å—å„¿æ‰‹è¡¨æ€ä¹ˆæ ·ï¼Ÿæˆ‘å¼Ÿå¼Ÿä¼šä¸ä¼šå–œæ¬¢ï¼Ÿå¥³ï¼šå¾ˆæ¼‚äº®ï¼Œä½†æ˜¯å¤ªè´µäº†ã€‚ç”·ï¼šä¸¤ç™¾å—ï¼Œä¸è´µã€‚å¥³ï¼šä½ å†çœ‹çœ‹ï¼Œé‚£æ˜¯ä¸¤åƒï¼Œä½ å°‘è¯´äº†ä¸€ä¸ªé›¶ã€‚é—®ï¼šç”·çš„æƒ³ç»™è°ä¹°æ‰‹è¡¨ï¼Ÿ', options: ['A å¼Ÿå¼Ÿ', 'B æœåŠ¡å‘˜', 'C æ±‰è¯­è€å¸ˆ'], answer: 'A' },
                { no: 34, type: 'mc3', part: 'listening', question: 'å¥³ï¼šå…«ç‚¹äº†ï¼Œæ€ä¹ˆè¿˜ä¸èµ·åºŠï¼Ÿç”·ï¼šè®©æˆ‘å†ç¡äºŒååˆ†é’Ÿã€‚å¥³ï¼šäºŒååˆ†é’Ÿï¼Ÿä½ ä¸å»ä¸Šç­äº†ï¼Ÿç”·ï¼šä»Šå¤©æ˜¯æ˜ŸæœŸå…­ã€‚é—®ï¼šå¥³çš„æƒ³è®©ç”·çš„åšä»€ä¹ˆï¼Ÿ', options: ['A æ¸¸æ³³', 'B èµ·åºŠ', 'C æ‰“ç¯®çƒ'], answer: 'B' },
                { no: 35, type: 'mc3', part: 'listening', question: 'ç”·ï¼šæ˜å¤©ä½ å»å—ï¼Ÿå¥³ï¼šä¸å»äº†ï¼Œæˆ‘æ˜å¤©ä¸Šåˆæœ‰è¯¾ã€‚ç”·ï¼šæ˜å¤©æ˜ŸæœŸæ—¥ï¼Œæ€ä¹ˆè¿˜æœ‰è¯¾ï¼Ÿå¥³ï¼šæ˜¯å»å­¦å¼€è½¦ã€‚é—®ï¼šå¥³çš„ä¸ºä»€ä¹ˆæ˜å¤©ä¸èƒ½å»ï¼Ÿ', options: ['A è¦å–æŠ¥çº¸', 'B è¦å»ä¸Šè¯¾', 'C è¦å»å”±æ­Œ'], answer: 'B' },
                { no: 41, type: 'mc6', part: 'reading', question: 'å¯¹ä¸èµ·ï¼Œæˆ‘ç°åœ¨å¾ˆå¿™ï¼Œæ²¡ï¼ˆ ï¼‰ã€‚', options: ['A æ—¶é—´', 'B æœºåœº', 'C å¼€å§‹', 'D ç”Ÿç—…', 'E è´µ', 'F ä»'], answer: 'A' },
                { no: 42, type: 'mc6', part: 'reading', question: 'ç”µå½±å°±è¦ï¼ˆ ï¼‰äº†ï¼Œä½ ä»¬å¿«ç‚¹å„¿è¿›å»å§ã€‚', options: ['A æ—¶é—´', 'B æœºåœº', 'C å¼€å§‹', 'D ç”Ÿç—…', 'E è´µ', 'F ä»'], answer: 'C' },
                { no: 43, type: 'mc6', part: 'reading', question: 'å–‚ï¼Œæˆ‘å·²ç»ï¼ˆ ï¼‰æ•™å®¤å‡ºæ¥äº†ï¼Œä½ åœ¨å“ªå„¿å‘¢ï¼Ÿ', options: ['A æ—¶é—´', 'B æœºåœº', 'C å¼€å§‹', 'D ç”Ÿç—…', 'E è´µ', 'F ä»'], answer: 'F' },
                { no: 44, type: 'mc6', part: 'reading', question: 'å¦»å­ï¼ˆ ï¼‰äº†ï¼Œä»–ä¸€ä¸ªæ™šä¸Šéƒ½æ²¡ç¡è§‰ã€‚', options: ['A æ—¶é—´', 'B æœºåœº', 'C å¼€å§‹', 'D ç”Ÿç—…', 'E è´µ', 'F ä»'], answer: 'D' },
                { no: 45, type: 'mc6', part: 'reading', question: 'å¥³ï¼šè¯·é—®ï¼Œè¿™å„¿ç¦»ï¼ˆ ï¼‰è¿˜è¿œå—ï¼Ÿç”·ï¼šä¸è¿œäº†ï¼Œå†æœ‰10åˆ†é’Ÿå°±åˆ°äº†ã€‚', options: ['A æ—¶é—´', 'B æœºåœº', 'C å¼€å§‹', 'D ç”Ÿç—…', 'E è´µ', 'F ä»'], answer: 'B' },
                { no: 46, type: 'tf', part: 'reading', question: 'æœ‰äº›äººå–œæ¬¢æ—©ä¸Šèµ·åºŠåå–ä¸€æ¯æ°´ï¼Œå› ä¸ºæ—©ä¸Šå–æ°´å¯¹èº«ä½“éå¸¸å¥½ã€‚\nâ˜… æ—©ä¸Šå–æ°´å¯¹èº«ä½“ä¸å¥½ã€‚', options: ['âˆš å¯¹', 'Ã— é”™'], answer: 'Ã—' },
                { no: 47, type: 'tf', part: 'reading', question: 'æˆ‘è¿™æ¬¡ä½çš„æ—…é¦†åœ¨ç«è½¦ç«™æ—è¾¹ï¼Œä¹Ÿä¸è´µï¼Œæˆ‘è§‰å¾—å¾ˆä¸é”™ï¼Œä¸‹æ¬¡æ¥æˆ‘è¿˜ä½é‚£å„¿ã€‚\nâ˜… é‚£å®¶æ—…é¦†ç¦»ç«è½¦ç«™å¾ˆè¿‘ã€‚', options: ['âˆš å¯¹', 'Ã— é”™'], answer: 'âˆš' },
                { no: 48, type: 'tf', part: 'reading', question: 'å„¿å­ï¼Œä½ æ¯å¤©è¿åŠ¨çš„æ—¶é—´å¤ªå°‘äº†ï¼Œæ˜å¤©æ—©ä¸Šå’Œæˆ‘ä¸€èµ·å»è·‘æ­¥å§ã€‚\nâ˜… ä»–æƒ³è®©å„¿å­å¤šè¿åŠ¨ã€‚', options: ['âˆš å¯¹', 'Ã— é”™'], answer: 'âˆš' },
                { no: 49, type: 'tf', part: 'reading', question: 'ç­‰è€ƒå®Œè¯•ï¼Œæˆ‘ä»¬å‡†å¤‡å»åŒ—äº¬ç©å„¿ä¸¤å¤©ï¼Œä½ å»ä¸å»ï¼Ÿ\nâ˜… ä»–æ­£åœ¨åŒ—äº¬æ—…æ¸¸ã€‚', options: ['âˆš å¯¹', 'Ã— é”™'], answer: 'Ã—' },
                { no: 50, type: 'tf', part: 'reading', question: 'è¿™ä¸ªç”µå½±å¾ˆé•¿ï¼Œæœ‰ä¸¤ä¸ªå¤šå°æ—¶ï¼Œä¸€å¼ ç¥¨120å…ƒï¼Œå­¦ç”Ÿç¥¨70å…ƒã€‚\nâ˜… å­¦ç”Ÿç¥¨ä¾¿å®œã€‚', options: ['âˆš å¯¹', 'Ã— é”™'], answer: 'âˆš' },
                { no: 51, type: 'mc6', part: 'reading', question: 'è¯·ä½ æ¥å›ç­”è¿™ä¸ªé—®é¢˜å¥½ä¸å¥½ï¼Ÿ', options: ['A æˆ‘è§‰å¾—å†™å¾—éå¸¸å¥½ï¼Œæˆ‘å…ˆç”Ÿä¹Ÿå¾ˆå–œæ¬¢ã€‚', 'B å¯¹ä¸èµ·ï¼Œè€å¸ˆï¼Œæˆ‘æ²¡å¬æ‡‚ã€‚', 'C æ—©ç‚¹å„¿ä¼‘æ¯ï¼Œæ˜å¤©ä¸Šåˆ9ç‚¹è§ã€‚', 'D å“¥ï¼Œä½ çš„ç”µè„‘å¤ªæ…¢äº†ã€‚', 'E ä»–åœ¨å“ªå„¿å‘¢ï¼Ÿä½ çœ‹è§ä»–äº†å—ï¼Ÿ', 'F è°¢è°¢ä½ å‘Šè¯‰æˆ‘è¿™ä»¶äº‹æƒ…ã€‚'], answer: 'B' },
                { no: 52, type: 'mc6', part: 'reading', question: 'è¿™å·²ç»æ¯”å‰å‡ å¤©å¿«å¤šäº†ã€‚', options: ['A æˆ‘è§‰å¾—å†™å¾—éå¸¸å¥½ï¼Œæˆ‘å…ˆç”Ÿä¹Ÿå¾ˆå–œæ¬¢ã€‚', 'B å¯¹ä¸èµ·ï¼Œè€å¸ˆï¼Œæˆ‘æ²¡å¬æ‡‚ã€‚', 'C æ—©ç‚¹å„¿ä¼‘æ¯ï¼Œæ˜å¤©ä¸Šåˆ9ç‚¹è§ã€‚', 'D å“¥ï¼Œä½ çš„ç”µè„‘å¤ªæ…¢äº†ã€‚', 'E ä»–åœ¨å“ªå„¿å‘¢ï¼Ÿä½ çœ‹è§ä»–äº†å—ï¼Ÿ', 'F è°¢è°¢ä½ å‘Šè¯‰æˆ‘è¿™ä»¶äº‹æƒ…ã€‚'], answer: 'D' },
                { no: 53, type: 'mc6', part: 'reading', question: 'ä»Šå¤©ç©å„¿äº†ä¸€å¤©ï¼Œç´¯äº†å§ï¼Ÿ', options: ['A æˆ‘è§‰å¾—å†™å¾—éå¸¸å¥½ï¼Œæˆ‘å…ˆç”Ÿä¹Ÿå¾ˆå–œæ¬¢ã€‚', 'B å¯¹ä¸èµ·ï¼Œè€å¸ˆï¼Œæˆ‘æ²¡å¬æ‡‚ã€‚', 'C æ—©ç‚¹å„¿ä¼‘æ¯ï¼Œæ˜å¤©ä¸Šåˆ9ç‚¹è§ã€‚', 'D å“¥ï¼Œä½ çš„ç”µè„‘å¤ªæ…¢äº†ã€‚', 'E ä»–åœ¨å“ªå„¿å‘¢ï¼Ÿä½ çœ‹è§ä»–äº†å—ï¼Ÿ', 'F è°¢è°¢ä½ å‘Šè¯‰æˆ‘è¿™ä»¶äº‹æƒ…ã€‚'], answer: 'C' },
                { no: 54, type: 'mc6', part: 'reading', question: 'ä¸å®¢æ°”ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰å¸®åŠ©ã€‚', options: ['A æˆ‘è§‰å¾—å†™å¾—éå¸¸å¥½ï¼Œæˆ‘å…ˆç”Ÿä¹Ÿå¾ˆå–œæ¬¢ã€‚', 'B å¯¹ä¸èµ·ï¼Œè€å¸ˆï¼Œæˆ‘æ²¡å¬æ‡‚ã€‚', 'C æ—©ç‚¹å„¿ä¼‘æ¯ï¼Œæ˜å¤©ä¸Šåˆ9ç‚¹è§ã€‚', 'D å“¥ï¼Œä½ çš„ç”µè„‘å¤ªæ…¢äº†ã€‚', 'E ä»–åœ¨å“ªå„¿å‘¢ï¼Ÿä½ çœ‹è§ä»–äº†å—ï¼Ÿ', 'F è°¢è°¢ä½ å‘Šè¯‰æˆ‘è¿™ä»¶äº‹æƒ…ã€‚'], answer: 'F' },
                { no: 55, type: 'mc6', part: 'reading', question: 'ä½ é€æˆ‘çš„é‚£æœ¬ä¹¦æˆ‘å·²ç»è¯»å®Œäº†ã€‚', options: ['A æˆ‘è§‰å¾—å†™å¾—éå¸¸å¥½ï¼Œæˆ‘å…ˆç”Ÿä¹Ÿå¾ˆå–œæ¬¢ã€‚', 'B å¯¹ä¸èµ·ï¼Œè€å¸ˆï¼Œæˆ‘æ²¡å¬æ‡‚ã€‚', 'C æ—©ç‚¹å„¿ä¼‘æ¯ï¼Œæ˜å¤©ä¸Šåˆ9ç‚¹è§ã€‚', 'D å“¥ï¼Œä½ çš„ç”µè„‘å¤ªæ…¢äº†ã€‚', 'E ä»–åœ¨å“ªå„¿å‘¢ï¼Ÿä½ çœ‹è§ä»–äº†å—ï¼Ÿ', 'F è°¢è°¢ä½ å‘Šè¯‰æˆ‘è¿™ä»¶äº‹æƒ…ã€‚'], answer: 'A' },
                { no: 56, type: 'mc5', part: 'reading', question: 'å·¦è¾¹æ˜¯â€œå¥³â€å­—ï¼Œå³è¾¹æ˜¯â€œç”Ÿâ€å­—ã€‚', options: ['A ä½ çŸ¥é“â€œå§“â€æ€ä¹ˆå†™å—ï¼Ÿ', 'B æˆ‘åœ¨è·¯ä¸Šä¹°äº†ç‚¹å„¿è‹¹æœã€‚', 'C ä½ æ€ä¹ˆä¼šè®¤è¯†é‚£ä¸ªå­©å­ï¼Ÿ', 'D é¢œè‰²ä¸é”™ï¼Œæ¯”é»‘çš„å¥½çœ‹ã€‚', 'E ä½ å¥½ï¼Œè¯·é—®æå°å§ä½å“ªä¸ªæˆ¿é—´ï¼Ÿ'], answer: 'A' },
                { no: 57, type: 'mc5', part: 'reading', question: 'æˆ‘æƒ³ä¹°æ‰‹æœºï¼Œä½ çœ‹è¿™ä¸ªçº¢çš„æ€ä¹ˆæ ·ï¼Ÿ', options: ['A ä½ çŸ¥é“â€œå§“â€æ€ä¹ˆå†™å—ï¼Ÿ', 'B æˆ‘åœ¨è·¯ä¸Šä¹°äº†ç‚¹å„¿è‹¹æœã€‚', 'C ä½ æ€ä¹ˆä¼šè®¤è¯†é‚£ä¸ªå­©å­ï¼Ÿ', 'D é¢œè‰²ä¸é”™ï¼Œæ¯”é»‘çš„å¥½çœ‹ã€‚', 'E ä½ å¥½ï¼Œè¯·é—®æå°å§ä½å“ªä¸ªæˆ¿é—´ï¼Ÿ'], answer: 'D' },
                { no: 58, type: 'mc5', part: 'reading', question: 'ç»™æˆ‘å§ï¼Œæˆ‘å»æ´—æ´—ã€‚', options: ['A ä½ çŸ¥é“â€œå§“â€æ€ä¹ˆå†™å—ï¼Ÿ', 'B æˆ‘åœ¨è·¯ä¸Šä¹°äº†ç‚¹å„¿è‹¹æœã€‚', 'C ä½ æ€ä¹ˆä¼šè®¤è¯†é‚£ä¸ªå­©å­ï¼Ÿ', 'D é¢œè‰²ä¸é”™ï¼Œæ¯”é»‘çš„å¥½çœ‹ã€‚', 'E ä½ å¥½ï¼Œè¯·é—®æå°å§ä½å“ªä¸ªæˆ¿é—´ï¼Ÿ'], answer: 'B' },
                { no: 59, type: 'mc5', part: 'reading', question: 'ä»–æ˜¯å¥³å„¿çš„åŒå­¦ï¼Œæ¥è¿‡æˆ‘ä»¬å®¶ã€‚', options: ['A ä½ çŸ¥é“â€œå§“â€æ€ä¹ˆå†™å—ï¼Ÿ', 'B æˆ‘åœ¨è·¯ä¸Šä¹°äº†ç‚¹å„¿è‹¹æœã€‚', 'C ä½ æ€ä¹ˆä¼šè®¤è¯†é‚£ä¸ªå­©å­ï¼Ÿ', 'D é¢œè‰²ä¸é”™ï¼Œæ¯”é»‘çš„å¥½çœ‹ã€‚', 'E ä½ å¥½ï¼Œè¯·é—®æå°å§ä½å“ªä¸ªæˆ¿é—´ï¼Ÿ'], answer: 'C' },
                { no: 60, type: 'mc5', part: 'reading', question: '507ï¼Œå·¦è¾¹ç¬¬ä¸€ä¸ªã€‚', options: ['A ä½ çŸ¥é“â€œå§“â€æ€ä¹ˆå†™å—ï¼Ÿ', 'B æˆ‘åœ¨è·¯ä¸Šä¹°äº†ç‚¹å„¿è‹¹æœã€‚', 'C ä½ æ€ä¹ˆä¼šè®¤è¯†é‚£ä¸ªå­©å­ï¼Ÿ', 'D é¢œè‰²ä¸é”™ï¼Œæ¯”é»‘çš„å¥½çœ‹ã€‚', 'E ä½ å¥½ï¼Œè¯·é—®æå°å§ä½å“ªä¸ªæˆ¿é—´ï¼Ÿ'], answer: 'E' }
            ];

            let currentIndex = 0;
            let userAnswers = new Array(questions.length).fill(null);
            let testStarted = false;
            let testFinished = false;
            let userName = "Peserta"; // default

            // Timer global: 47 menit = 2820 detik
            const TOTAL_GLOBAL_SECONDS = 47 * 60;
            let globalTimeLeft = TOTAL_GLOBAL_SECONDS;
            let perSoalTimeLeft = 60;

            let globalTimerInterval = null;
            let perSoalTimerInterval = null;

            const container = document.getElementById('mainContainer');

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }

            function clearAllIntervals() {
                if (globalTimerInterval) clearInterval(globalTimerInterval);
                if (perSoalTimerInterval) clearInterval(perSoalTimerInterval);
                globalTimerInterval = null;
                perSoalTimerInterval = null;
            }

            function lanjutKeSoalBerikutnya(jawabanTersimpan = null) {
                if (jawabanTersimpan !== null) {
                    userAnswers[currentIndex] = jawabanTersimpan;
                }
                if (currentIndex + 1 < questions.length) {
                    currentIndex++;
                    perSoalTimeLeft = 60;
                    renderSoal();
                } else {
                    clearAllIntervals();
                    tampilkanLaporan();
                }
            }

            function perSoalWaktuHabis() {
                if (testFinished) return;
                lanjutKeSoalBerikutnya(null);
            }

            function globalWaktuHabis() {
                if (testFinished) return;
                clearAllIntervals();
                testFinished = true;
                tampilkanLaporan();
            }

            function startTimers() {
                clearAllIntervals();

                globalTimerInterval = setInterval(() => {
                    if (testFinished) return;
                    globalTimeLeft--;
                    if (globalTimeLeft <= 0) {
                        globalTimeLeft = 0;
                        globalWaktuHabis();
                    }
                    const globalEl = document.getElementById('globalTimerDisplay');
                    const perEl = document.getElementById('perSoalTimerDisplay');
                    if (globalEl) globalEl.innerText = formatTime(globalTimeLeft);
                    if (perEl) perEl.innerText = formatTime(perSoalTimeLeft);
                }, 1000);

                perSoalTimerInterval = setInterval(() => {
                    if (testFinished) return;
                    perSoalTimeLeft--;
                    if (perSoalTimeLeft <= 0) {
                        perSoalTimeLeft = 0;
                        clearInterval(perSoalTimerInterval);
                        perSoalTimerInterval = null;
                        perSoalWaktuHabis();
                    }
                    const perEl = document.getElementById('perSoalTimerDisplay');
                    if (perEl) perEl.innerText = formatTime(perSoalTimeLeft);
                }, 1000);
            }

            function renderModal() {
                container.innerHTML = `
                    <div class="modal-start" id="modalStart">
                        <div class="modal-card">
                            <h2>ğŸ± ãƒ‰ãƒ©ãˆã‚‚ã‚“</h2>
                            <p>HSK äºŒçº§ æ¨¡æ‹Ÿè€ƒè¯•</p>
                            <p>ğŸ“‹ 35 soal â€¢ Listening & Reading</p>
                            <p>â± Total 47 menit | 60 detik per soal</p>
                            <input type="text" id="usernameInput" placeholder="Masukkan nama kamu" value="${userName}">
                            <button class="btn-start" id="btnStart">Mulai</button>
                        </div>
                    </div>
                `;
                document.getElementById('btnStart').addEventListener('click', () => {
                    const input = document.getElementById('usernameInput');
                    if (input.value.trim() !== '') {
                        userName = input.value.trim();
                    } else {
                        userName = 'Peserta';
                    }
                    document.getElementById('modalStart').style.display = 'none';
                    startTest();
                });
            }

            function startTest() {
                testStarted = true;
                testFinished = false;
                currentIndex = 0;
                userAnswers.fill(null);
                globalTimeLeft = TOTAL_GLOBAL_SECONDS;
                perSoalTimeLeft = 60;
                renderSoal();
                startTimers();
            }

            function renderSoal() {
                if (currentIndex >= questions.length) {
                    tampilkanLaporan();
                    return;
                }
                const q = questions[currentIndex];
                let optionsHtml = '';
                if (q.type === 'mc3' || q.type === 'mc5' || q.type === 'mc6') {
                    q.options.forEach((opt, idx) => {
                        const letter = opt.split(' ')[0];
                        optionsHtml += `
                            <div class="option-item" onclick="document.getElementById('opt_${currentIndex}_${letter}').click();">
                                <input type="radio" name="soal" id="opt_${currentIndex}_${letter}" value="${letter}" ${userAnswers[currentIndex] === letter ? 'checked' : ''}>
                                <label for="opt_${currentIndex}_${letter}">${opt}</label>
                            </div>
                        `;
                    });
                } else if (q.type === 'tf') {
                    optionsHtml += `
                        <div class="option-item" onclick="document.getElementById('opt_${currentIndex}_âˆš').click();">
                            <input type="radio" name="soal" id="opt_${currentIndex}_âˆš" value="âˆš" ${userAnswers[currentIndex] === 'âˆš' ? 'checked' : ''}>
                            <label for="opt_${currentIndex}_âˆš">${q.options[0]}</label>
                        </div>
                        <div class="option-item" onclick="document.getElementById('opt_${currentIndex}_Ã—').click();">
                            <input type="radio" name="soal" id="opt_${currentIndex}_Ã—" value="Ã—" ${userAnswers[currentIndex] === 'Ã—' ? 'checked' : ''}>
                            <label for="opt_${currentIndex}_Ã—">${q.options[1]}</label>
                        </div>
                    `;
                }

                container.innerHTML = `
                    <div class="header">
                        <div class="doraemon-icon"></div>
                        <h1>HSK 2 â€¢ Doraemon</h1>
                        <div style="width:50px;"></div>
                    </div>
                    <div class="username-display">ğŸ‘¤ ${userName}</div>
                    <div class="timer-panel">
                        <span class="timer-item">â³ Sisa: <span id="perSoalTimerDisplay">${formatTime(perSoalTimeLeft)}</span></span>
                        <span class="timer-item">âŒ› Total: <span id="globalTimerDisplay">${formatTime(globalTimeLeft)}</span></span>
                    </div>
                    <div class="question-box">
                        <div class="question-text">${q.question.replace(/\n/g, '<br>')}</div>
                        <div class="options" id="optionsContainer">
                            ${optionsHtml}
                        </div>
                        <button class="btn-submit" id="submitBtn">âœ… Jawab & Lanjut</button>
                    </div>
                    <div class="footer">ğŸ”” Jangan nyontek, nanti kena rahasia Doraemon!</div>
                `;

                const radios = document.querySelectorAll('input[name="soal"]');
                radios.forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        userAnswers[currentIndex] = e.target.value;
                    });
                });

                document.getElementById('submitBtn').addEventListener('click', () => {
                    const selected = document.querySelector('input[name="soal"]:checked');
                    if (!selected) {
                        alert('Pilih jawaban dulu ya!');
                        return;
                    }
                    userAnswers[currentIndex] = selected.value;
                    document.getElementById('submitBtn').disabled = true;
                    setTimeout(() => {
                        lanjutKeSoalBerikutnya();
                    }, 500);
                });
            }

            function tampilkanLaporan() {
                testFinished = true;
                clearAllIntervals();

                let listeningBenar = 0, readingBenar = 0;
                questions.forEach((q, idx) => {
                    const jawabanUser = userAnswers[idx];
                    const kunci = q.answer;
                    if (jawabanUser === kunci) {
                        if (q.part === 'listening') listeningBenar++;
                        else readingBenar++;
                    }
                });
                const totalBenar = listeningBenar + readingBenar;
                const totalSoal = questions.length;
                const persen = (totalBenar / totalSoal * 100).toFixed(1);
                const lulus = persen >= 90 ? 'âœ… LULUS' : 'âŒ TIDAK LULUS';

                container.innerHTML = `
                    <div class="header">
                        <div class="doraemon-icon"></div>
                        <h1>HSK 2 â€¢ Doraemon</h1>
                        <div style="width:50px;"></div>
                    </div>
                    <div class="laporan">
                        <h2>ğŸ‰ LAPORAN AKHIR</h2>
                        <div style="font-size:2rem; margin:10px;">ğŸ‘¤ ${userName}</div>
                        <div class="skor">${persen}%</div>
                        <div style="font-size:2rem; margin:10px;">${lulus}</div>
                        <div class="detail">
                            <div>ğŸ‘‚ Listening<br>${listeningBenar}/15</div>
                            <div>ğŸ“– Reading<br>${readingBenar}/20</div>
                        </div>
                        <button class="btn-ulang" id="ulangBtn">ğŸ”„ Coba Lagi</button>
                    </div>
                `;
                document.getElementById('ulangBtn').addEventListener('click', () => {
                    location.reload();
                });
            }

            renderModal();
        })();
    </script>
</body>
</html>